<div id="uf-side-nav">

    <div style="text-align: left;padding: 20px 10px;">
        <button mat-button class="view-button" [routerLink]="[{view: 'course'}]" style="outline: none;"
            [ngClass]="{'selected' : view=='course'}" [disabled]="!viewChangeValid" (click)="changeView('course')">
            <mat-icon matSuffix>
                apps
            </mat-icon>
        </button>
        <button mat-button class="view-button" [routerLink]="[{view: 'tree'}]" style="outline: none;" 
            [ngClass]="{'selected' : view=='tree'}"
            (click)="changeView('tree')">
            <mat-icon matSuffix>
                account_tree
            </mat-icon>
        </button>
    </div>

    <br>
    <div style="text-align: left;padding: 10px 10px;" *ngIf="isLoading">
        <!-- Loading.... -->
        <div style="height: 30px; width: 200px; background-color: #f6f7f7;"></div>
        <div style="margin: 10px 0px 0px 20px; height: 30px; width: 200px; background-color: #f6f7f7;"></div>
        <div style="margin: 10px 0px 0px 20px; height: 30px; width: 200px; background-color: #f6f7f7;"></div>
        <div style="margin: 10px 0px 0px 20px; height: 30px; width: 200px; background-color: #f6f7f7;"></div>
        <div style="margin: 10px 0px 0px 20px; height: 30px; width: 200px; background-color: #f6f7f7;"></div>
        <div style="margin: 10px 0px 0px 20px; height: 30px; width: 200px; background-color: #f6f7f7;"></div>
    </div>



    <div style="text-align: left;padding: 10px 10px;" *ngIf="!isLoading">
        <!-- {{dataSource}} -->
        <b> Explore the branches: </b>
        <br>
        <br>
        <mat-tree [dataSource]="dataSource" style="color: #4f9aab;" [treeControl]="treeControl" class="example-tree">
            <!-- This is the tree node template for leaf nodes -->
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                <li class="mat-tree-node" style="border-left: 1px solid rgba(201, 201, 204, 0.48);
                box-shadow: 0 1px 3px rgba(0,0,0, .1);
                border-radius: 5px;" [ngClass]="{'active' : node.id==active_id}">
                    <!-- use a disabled button to provide padding for tree leaf -->
                    <button mat-icon-button disabled style="outline: none;width: 25px;">
                    </button>
                    <a [routerLink]='["/roots",node.parent_kb_base, node.id]'
                         queryParamsHandling="merge"
                        style="outline: none; cursor: pointer;">
                        {{node.label}}
                    </a>
                </li>
            </mat-tree-node>
            <!-- This is the tree node template for expandable nodes -->
            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                <li>
                    <div class="mat-tree-node" style="width: 100%; color: #1d2223; text-align: right;
                    border-left: 1px solid rgba(201, 201, 204, 0.48);
                    box-shadow: 0 1px 3px rgba(0,0,0, .1);
                    border-radius: 5px;"
                        [ngClass]="{'active' : node.id==active_id}">
                        <button mat-icon-button matTreeNodeToggle style="outline: none;width: fit-content;"
                            [attr.aria-label]="'toggle ' + node.name">
                            <mat-icon class="mat-icon-rtl-mirror">
                                {{treeControl.isExpanded(node) ? 'remove' : 'add'}}
                            </mat-icon>
                        </button>
                        <a [routerLink]='["/roots",node.parent_kb_base, node.id]' queryParamsHandling="merge"
                            style="outline: none; cursor: pointer;">
                            {{node.label}}
                        </a>

                    </div>
                    <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
                        <ng-container matTreeNodeOutlet></ng-container>
                    </ul>
                </li>
            </mat-nested-tree-node>
        </mat-tree>

    </div>

</div>