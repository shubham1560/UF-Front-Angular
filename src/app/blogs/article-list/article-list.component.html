<div id="articlelist">
    <!-- <div class="go-back" (click)="goBack()">
        Go Back
    </div> -->
    <div *ngIf="isLoading">
        <!-- <div> -->
        <div class="heading" *ngIf="!openInModal">
            <div style="width: 200px; height: 30px; background-color: white;"></div>
            <!-- Loading.... -->
            <div style="width: 220px; height: 20px; margin-top: 10px; background-color: white;"></div>
            <!-- Loading.... -->
            <div style="width: 120px; height: 20px; margin-top: 10px; background-color: white;"></div>
            <!-- Loading.... -->

        </div>
        <div class="heading" *ngIf="openInModal">
            <div style="width: 200px; height: 30px; background-color: #f7f7f7;"></div>
            <div style="width: 260px; height: 20px; margin-top: 10px; background-color: #f7f7f7;"></div>
        </div>

        <div style="margin-top: 30px; padding-right: 10px;">
            <div class="section-ghost" style="height: 135px">
                <div style="height: 15px; width: 120px; background-color: #f7f7f7;">
                </div>
                <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                </div>
                <div style="padding: 10px 10px 10px 30px">
                    <div style="height: 15px; background-color: #f7f7f7;">
                    </div>
                    <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                    </div>
                    <!-- <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                    </div> -->
                </div>
            </div>
            <div class="section-ghost">
                <div style="height: 15px; width: 120px; background-color: #f7f7f7;">
                </div>
                <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                </div>
            </div>

            <!-- <div class="section-ghost">
                <div style="height: 15px; width: 120px; background-color: #f7f7f7;">
                </div>
                <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                </div>
            </div> -->
            <!-- <div class="section-ghost">
                <div style="height: 15px; width: 120px; background-color: #f7f7f7;">
                </div>
                <div style="height: 15px; margin-top: 10px; background-color: #f7f7f7;">
                </div>
            </div> -->

        </div>
    </div>

    <div *ngIf="openInModal">
        <mat-dialog-content class="mat-typography">
            <div class="" mat-dialog-title>
                <span style="color: #4f9aab; font-size: 16px;">{{courseName}}</span> <br>
                <span style="color: #3c869a; font-size: 14px; text-align: justify;">{{courseDescription}}</span>
                <div *ngIf="progress">
                    <b>Progress: </b>{{progress}} %
                </div>
                
                
                <!-- <div *ngIf="!signedIn">
                You can <a (click)="openLoginPrompt()" style="color: #4f9aab; cursor: pointer;">sign in</a> and track
                your
                progress!
            </div> -->

            </div>
            <mat-progress-bar *ngIf="progress" style="color: #4f9aab" mode="determinate" [value]="progress">
            </mat-progress-bar>

            <div *ngIf="owner">
                Edit Section 
                <a routerLink="/courses/{{course}}/pathbuild" mat-icon-button>
                    <mat-icon>
                        edit
                    </mat-icon>
                </a>         
            </div>
            <!-- <div style="height: 500px;"></div> -->
            <div class="left-widget-wrapper">
                <mat-accordion color="primary">
                    <mat-expansion-panel *ngFor="let section of sections; let i = index" [expanded]="section.active"
                        style="box-shadow: none; margin-bottom: 10px;" (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
                        <!-- <mat-progress-bar *ngIf="progress" mode="determinate" [value]="section.progress"></mat-progress-bar> -->
                        <mat-expansion-panel-header style="height: 70px" [ngClass]="{'active' : section.active}">
                            <mat-panel-title [ngClass]="{'active' : section.active}">

                                <b>
                                    <!-- <div *ngIf="!section.doneAll || !progress"
                                    style="margin-right: 10px; padding: 3px 10px; border: 3px solid lightgray; border-radius: 20px;display: inline-block;">
                                    {{i+1}}
                                </div>
                                <div *ngIf="section.doneAll && progress"
                                    style="margin-right: 10px; padding: 3px 10px; border: 3px solid green; border-radius: 20px;display: inline-block;">
                                    {{i+1}}
                                </div> -->



                                    {{i+1}}.
                                    {{section.label}}
                                    <br>
                                    <span style="color:#3c869a;"> Section Progress: {{section.progress}} % </span>

                                </b>

                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngFor="let article of section.articles; let j = index">
                            <div (click)="navigate(article.id)" class="uf-article">
                                <div class="d-inline" *ngIf="!article.viewed">
                                    <mat-icon style="vertical-align: middle;" matSuffix>
                                        panorama_fish_eye
                                    </mat-icon>

                                </div>
                                <div class="d-inline" *ngIf="article.viewed">
                                    <mat-icon style="vertical-align: middle; color: rgb(7, 88, 7)" matSuffix>
                                        check_circle</mat-icon>
                                </div>
                                <div class="d-inline" [ngClass]="{'active' : article.active}">
                                    {{article.title}}
                                </div>

                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

            </div>
        </mat-dialog-content>
    </div>

    <div *ngIf="!openInModal">

        <div *ngIf="!isLoading">
            <div class="heading">
                <h4 style="color: #4f9aab">{{courseName}}</h4>
                <span style="color: #3c869a; font-size: smaller; font-size: smaller;">{{courseDescription}}</span>
                <div *ngIf="progress">
                    <b>Progress: </b>{{progress}} %
                </div>
                
                
                <!-- <div *ngIf="!signedIn">
                    You can <a (click)="openLoginPrompt()" style="color: #4f9aab; cursor: pointer;">sign in</a> and track
                    your
                    progress!
                </div> -->

            </div>
            <mat-progress-bar *ngIf="progress" style="color: #4f9aab" mode="determinate" [value]="progress">
            </mat-progress-bar>
            <br>
            <div *ngIf="owner" style="padding-left: 20px; color: #3c869a;">
                Edit Sections
                <a routerLink="/courses/{{course}}/pathbuild" mat-icon-button>
                    <mat-icon>
                        edit
                    </mat-icon>
                </a>         
            </div>
            <br>
            <div class="left-widget-wrapper">
                <mat-accordion color="primary">
                    <mat-expansion-panel *ngFor="let section of sections; let i = index" [expanded]="section.active"
                        style="box-shadow: none; margin-bottom: 10px;" (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
                        <!-- <mat-progress-bar *ngIf="progress" mode="determinate" [value]="section.progress"></mat-progress-bar> -->
                        <mat-expansion-panel-header [ngClass]="{'active' : section.active}">
                            <mat-panel-title [ngClass]="{'active' : section.active}">

                                <b>
                                    <!-- <div *ngIf="!section.doneAll || !progress"
                                    style="margin-right: 10px; padding: 3px 10px; border: 3px solid lightgray; border-radius: 20px;display: inline-block;">
                                    {{i+1}}
                                </div>
                                <div *ngIf="section.doneAll && progress"
                                    style="margin-right: 10px; padding: 3px 10px; border: 3px solid green; border-radius: 20px;display: inline-block;">
                                    {{i+1}}
                                </div> -->


                                    
                                    {{i+1}}.
                                    {{section.label}}
                                    <br>
                                    <span style="color:#3c869a;"> Section Progress: {{section.progress}} % </span>

                                </b>

                            </mat-panel-title>
                            <br>
                            <!-- <span style="color:#3c869a;"> Section Progress: {{section.progress}} % </span> -->
                        </mat-expansion-panel-header>
                        

                        <div *ngFor="let article of section.articles; let j = index">
                            <div (click)="navigate(article.id)" class="uf-article">
                                <div class="d-inline" *ngIf="!article.viewed">
                                    <mat-icon style="vertical-align: middle;" matSuffix>
                                        panorama_fish_eye
                                    </mat-icon>

                                </div>
                                <div class="d-inline" *ngIf="article.viewed">
                                    <mat-icon style="vertical-align: middle; color: rgb(7, 88, 7)" matSuffix>
                                        check_circle</mat-icon>
                                </div>
                                <div class="d-inline" [ngClass]="{'active' : article.active}">
                                    {{article.title}}
                                </div>

                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

            </div>
        </div>
    </div>

</div>