<mat-progress-bar mode="determinate" color="accent" value="100" *ngIf="!isLoading"></mat-progress-bar>
<mat-progress-bar mode="query" color="accent" *ngIf="isLoading"></mat-progress-bar>
<div class="flex-wrapper">
    <div class="container" id="uf-authored-articles">
    
        <button mat-button routerLink="/welcome" class="primary-button-inverted" style="margin-top: 10px;"> <mat-icon>keyboard_backspace</mat-icon> Home</button>

        <div class="row">
            <h2 style="color: #8dbcaa; margin: auto;">My articles</h2>
            <br> <br>
        </div>
        <div class="row">
            <div class="col-md-3">
                State
                <br> <br>
                <button mat-button class="primary-button uf-button" (click)="changeState('all')">
                    <mat-icon *ngIf="state=='all'">
                        send
                    </mat-icon>
                    All

                </button>
                <br>
                <button mat-button class="primary-button uf-button" (click)="changeState('draft')">
                    <mat-icon *ngIf="state=='draft'">
                        send
                    </mat-icon>

                    Draft
                </button>
                <br>
                <button mat-button class="primary-button uf-button" (click)="changeState('review')">
                    <mat-icon *ngIf="state=='review'">
                        send
                    </mat-icon>

                    Review
                </button>
                <br>
                <button mat-button class="primary-button uf-button" (click)='changeState("published")'>
                    <mat-icon *ngIf="state=='published'">
                        send
                    </mat-icon>
                    Published
                </button>
                <br>
            </div>



            <div class="col-md-9">
                <div style="text-align: end;">
                    Sort By:
                    <button mat-button class="primary-button" style="border: none !important;"
                        (click)="changeSort('title')">
                        Title
                        <mat-icon *ngIf="sort_by=='title'">
                            keyboard_arrow_down
                        </mat-icon>
                        <mat-icon *ngIf="sort_by=='-title'">
                            keyboard_arrow_up
                        </mat-icon>
                    </button>
                    <button mat-button class="primary-button" style="border: none !important;"
                        (click)="changeSort('sys_created_on')">
                        Created
                        <mat-icon *ngIf="sort_by=='sys_created_on'">
                            keyboard_arrow_down
                        </mat-icon>
                        <mat-icon *ngIf="sort_by=='-sys_created_on'">
                            keyboard_arrow_up
                        </mat-icon>
                    </button>
                    <button mat-button class="primary-button" style="border: none !important;"
                        (click)="changeSort('sys_updated_on')">
                        Updated
                        <mat-icon *ngIf="sort_by=='sys_updated_on'">
                            keyboard_arrow_down
                        </mat-icon>
                        <mat-icon *ngIf="sort_by=='-sys_updated_on'">
                            keyboard_arrow_up
                        </mat-icon>
                    </button>
                </div>
                <br>
                <span *ngIf="isLoading">Loading...</span>
                <div *ngIf="!isLoading">
                    <div *ngFor="let article of articles_data?.articles">

                        <mat-card class="st-border">
                            <mat-card-header>
                                <mat-card-title><a style="color: #293E40;"
                                        href="path/article/{{article.id}}">{{article.title}}</a></mat-card-title>
                                <mat-card-subtitle>Updated: {{article.sys_updated_on | datesAgoDate}}
                                    <br>
                                    Created: {{article.sys_created_on | datesAgoDate}}
                                </mat-card-subtitle>
                            </mat-card-header>
                            <mat-card-actions>
                                <button mat-button style="outline: none;"
                                    (click)="deleteArticle(article.id, article.title)">
                                    <mat-icon style="color: red;">
                                        delete
                                    </mat-icon>
                                </button>

                                <button mat-button style="outline: none; color:#438C9F">
                                    {{article.workflow}}
                                </button>
                            </mat-card-actions>
                        </mat-card>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>